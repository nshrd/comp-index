# üß™ –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CBMA14 Index

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ CBMA14 Index, –≤–∫–ª—é—á–∞—é—â—É—é unit —Ç–µ—Å—Ç—ã –∏ Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç—ã
- `test_cbma14_calculator.py` - –¢–µ—Å—Ç—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ CBMA14 (15 —Ç–µ—Å—Ç–æ–≤)
- `test_cbma14_provider.py` - –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö CBMA14 (7 —Ç–µ—Å—Ç–æ–≤)
- `test_config.py` - –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (10 —Ç–µ—Å—Ç–æ–≤)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `test_docker_integration.py` - Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (12 —Ç–µ—Å—Ç–æ–≤)

### –£—Ç–∏–ª–∏—Ç—ã
- `run_tests.py` - –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ unit —Ç–µ—Å—Ç–æ–≤
- `README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä—ã–µ)
```bash
# –í—Å–µ unit —Ç–µ—Å—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
make test

# –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
make test-calculator  # –¢–µ—Å—Ç—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
make test-provider    # –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
make test-config      # –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
python tests/run_tests.py
```

### Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–º–µ–¥–ª–µ–Ω–Ω—ã–µ)
```bash
# Docker —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É—é—Ç Docker –∏ –∑–∞–Ω–∏–º–∞—é—Ç ~5-10 –º–∏–Ω—É—Ç)
make test-docker

# –í—Å–µ —Ç–µ—Å—Ç—ã (unit + docker)
make test-all
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
```bash
# Unit —Ç–µ—Å—Ç
python tests/run_tests.py tests.test_cbma14_calculator.TestCBMA14Calculator.test_calculate_moving_average

# Docker —Ç–µ—Å—Ç
python -m pytest tests/test_docker_integration.py::TestDockerIntegration::test_docker_images_build -v
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

### Unit —Ç–µ—Å—Ç—ã (28 —Ç–µ—Å—Ç–æ–≤)

#### CBMA14Calculator (15 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–∞
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- ‚úÖ –†–∞—Å—á–µ—Ç –ø—Ä–æ—Å—Ç–æ–π —Å–∫–æ–ª—å–∑—è—â–µ–π —Å—Ä–µ–¥–Ω–µ–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö Overall (–±–µ–∑ Finance)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

#### CBMA14Provider (7 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏–º–≤–æ–ª–∞—Ö
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É
- ‚úÖ Fallback –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É
- ‚úÖ –ü–æ–∏—Å–∫ —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### Config (6 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (dev/prod)
- ‚úÖ –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –∏ –æ—á–∏—Å—Ç–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (12 —Ç–µ—Å—Ç–æ–≤)

#### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (4 —Ç–µ—Å—Ç–∞)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è Dockerfile.builder
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è Dockerfile.udf
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è docker-compose.yml
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –°–±–æ—Ä–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤ (builder + udf)
- ‚úÖ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ docker-compose
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π docker-compose

#### –†–∞–±–æ—Ç–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (5 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ Healthcheck UDF —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Nginx
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ API

## üîß –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### Unit —Ç–µ—Å—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å–∏—Å—Ç–µ–º—ã
- –ë—ã—Å—Ç—Ä—ã–µ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ

### Docker —Ç–µ—Å—Ç—ã
- –†–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã
- –¢—Ä–µ–±—É—é—Ç Docker –∏ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Unit —Ç–µ—Å—Ç—ã
```
python >= 3.8
unittest (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
tempfile (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
unittest.mock (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
```

### Docker —Ç–µ—Å—Ç—ã
```
python >= 3.8
requests >= 2.25.0
docker >= 20.0.0
docker-compose >= 1.29.0
pytest >= 6.0.0
```

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test_<component>.py`
2. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `unittest.TestCase`
3. –î–æ–±–∞–≤—å—Ç–µ –º–æ–¥—É–ª—å –≤ `run_tests.py`

```python
import unittest

class TestNewComponent(unittest.TestCase):
    def test_feature(self):
        self.assertEqual(expected, actual)
```

### Docker —Ç–µ—Å—Ç
1. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥—ã –≤ `TestDockerIntegration`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `self.skipTest()` –¥–ª—è –∑–∞–≤–∏—Å–∏–º—ã—Ö —Ç–µ—Å—Ç–æ–≤
3. –î–æ–±–∞–≤—å—Ç–µ cleanup –≤ `setUp()`

```python
def test_new_docker_feature(self):
    if not self.containers_started:
        self.skipTest("–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã")
    # –í–∞—à —Ç–µ—Å—Ç –∑–¥–µ—Å—å
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –ó–∞–ø—É—Å–∫–∞–π—Ç–µ `make test` –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. **CI/CD**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `make test-all` –¥–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
3. **–û—Ç–ª–∞–¥–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `-v` —Ñ–ª–∞–≥ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Docker —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Ä–µ–∂–µ –∏–∑-–∑–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 40 —Ç–µ—Å—Ç–æ–≤
- **Unit —Ç–µ—Å—Ç—ã**: 28 (–±—ã—Å—Ç—Ä—ã–µ, ~10 —Å–µ–∫—É–Ω–¥)
- **Docker —Ç–µ—Å—Ç—ã**: 12 (–º–µ–¥–ª–µ–Ω–Ω—ã–µ, ~5-10 –º–∏–Ω—É—Ç)
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: 100% (–≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç) 